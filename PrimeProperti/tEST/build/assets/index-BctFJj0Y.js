var Q,K;function Z(){if(K)return Q;K=1;var b=String.prototype.replace,i=/%20/g,a={RFC1738:"RFC1738",RFC3986:"RFC3986"};return Q={default:a.RFC3986,formatters:{RFC1738:function(t){return b.call(t,i,"+")},RFC3986:function(t){return String(t)}},RFC1738:a.RFC1738,RFC3986:a.RFC3986},Q}var H,W;function ee(){if(W)return H;W=1;var b=Z(),i=Object.prototype.hasOwnProperty,a=Array.isArray,t=function(){for(var e=[],r=0;r<256;++r)e.push("%"+((r<16?"0":"")+r.toString(16)).toUpperCase());return e}(),h=function(r){for(;r.length>1;){var n=r.pop(),o=n.obj[n.prop];if(a(o)){for(var f=[],u=0;u<o.length;++u)typeof o[u]<"u"&&f.push(o[u]);n.obj[n.prop]=f}}},y=function(r,n){for(var o=n&&n.plainObjects?Object.create(null):{},f=0;f<r.length;++f)typeof r[f]<"u"&&(o[f]=r[f]);return o},v=function e(r,n,o){if(!n)return r;if(typeof n!="object"){if(a(r))r.push(n);else if(r&&typeof r=="object")(o&&(o.plainObjects||o.allowPrototypes)||!i.call(Object.prototype,n))&&(r[n]=!0);else return[r,n];return r}if(!r||typeof r!="object")return[r].concat(n);var f=r;return a(r)&&!a(n)&&(f=y(r,o)),a(r)&&a(n)?(n.forEach(function(u,c){if(i.call(r,c)){var p=r[c];p&&typeof p=="object"&&u&&typeof u=="object"?r[c]=e(p,u,o):r.push(u)}else r[c]=u}),r):Object.keys(n).reduce(function(u,c){var p=n[c];return i.call(u,c)?u[c]=e(u[c],p,o):u[c]=p,u},f)},S=function(r,n){return Object.keys(n).reduce(function(o,f){return o[f]=n[f],o},r)},F=function(e,r,n){var o=e.replace(/\+/g," ");if(n==="iso-8859-1")return o.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(o)}catch{return o}},$=function(r,n,o,f,u){if(r.length===0)return r;var c=r;if(typeof r=="symbol"?c=Symbol.prototype.toString.call(r):typeof r!="string"&&(c=String(r)),o==="iso-8859-1")return escape(c).replace(/%u[0-9a-f]{4}/gi,function(x){return"%26%23"+parseInt(x.slice(2),16)+"%3B"});for(var p="",w=0;w<c.length;++w){var d=c.charCodeAt(w);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||u===b.RFC1738&&(d===40||d===41)){p+=c.charAt(w);continue}if(d<128){p=p+t[d];continue}if(d<2048){p=p+(t[192|d>>6]+t[128|d&63]);continue}if(d<55296||d>=57344){p=p+(t[224|d>>12]+t[128|d>>6&63]+t[128|d&63]);continue}w+=1,d=65536+((d&1023)<<10|c.charCodeAt(w)&1023),p+=t[240|d>>18]+t[128|d>>12&63]+t[128|d>>6&63]+t[128|d&63]}return p},g=function(r){for(var n=[{obj:{o:r},prop:"o"}],o=[],f=0;f<n.length;++f)for(var u=n[f],c=u.obj[u.prop],p=Object.keys(c),w=0;w<p.length;++w){var d=p[w],x=c[d];typeof x=="object"&&x!==null&&o.indexOf(x)===-1&&(n.push({obj:c,prop:d}),o.push(x))}return h(n),r},E=function(r){return Object.prototype.toString.call(r)==="[object RegExp]"},m=function(r){return!r||typeof r!="object"?!1:!!(r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer(r))},l=function(r,n){return[].concat(r,n)},s=function(r,n){if(a(r)){for(var o=[],f=0;f<r.length;f+=1)o.push(n(r[f]));return o}return n(r)};return H={arrayToObject:y,assign:S,combine:l,compact:g,decode:F,encode:$,isBuffer:m,isRegExp:E,maybeMap:s,merge:v},H}var U,X;function ne(){if(X)return U;X=1;var b=ee(),i=Z(),a=Object.prototype.hasOwnProperty,t={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},h=Array.isArray,y=String.prototype.split,v=Array.prototype.push,S=function(s,e){v.apply(s,h(e)?e:[e])},F=Date.prototype.toISOString,$=i.default,g={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:b.encode,encodeValuesOnly:!1,format:$,formatter:i.formatters[$],indices:!1,serializeDate:function(e){return F.call(e)},skipNulls:!1,strictNullHandling:!1},E=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},m=function s(e,r,n,o,f,u,c,p,w,d,x,O,A,R){var j=e;if(typeof c=="function"?j=c(r,j):j instanceof Date?j=d(j):n==="comma"&&h(j)&&(j=b.maybeMap(j,function(L){return L instanceof Date?d(L):L})),j===null){if(o)return u&&!A?u(r,g.encoder,R,"key",x):r;j=""}if(E(j)||b.isBuffer(j)){if(u){var _=A?r:u(r,g.encoder,R,"key",x);if(n==="comma"&&A){for(var V=y.call(String(j),","),k="",D=0;D<V.length;++D)k+=(D===0?"":",")+O(u(V[D],g.encoder,R,"value",x));return[O(_)+"="+k]}return[O(_)+"="+O(u(j,g.encoder,R,"value",x))]}return[O(r)+"="+O(String(j))]}var q=[];if(typeof j>"u")return q;var C;if(n==="comma"&&h(j))C=[{value:j.length>0?j.join(",")||null:void 0}];else if(h(c))C=c;else{var M=Object.keys(j);C=p?M.sort(p):M}for(var T=0;T<C.length;++T){var N=C[T],G=typeof N=="object"&&typeof N.value<"u"?N.value:j[N];if(!(f&&G===null)){var te=h(j)?typeof n=="function"?n(r,N):r:r+(w?"."+N:"["+N+"]");S(q,s(G,te,n,o,f,u,c,p,w,d,x,O,A,R))}}return q},l=function(e){if(!e)return g;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||g.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=i.default;if(typeof e.format<"u"){if(!a.call(i.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var o=i.formatters[n],f=g.filter;return(typeof e.filter=="function"||h(e.filter))&&(f=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:g.addQueryPrefix,allowDots:typeof e.allowDots>"u"?g.allowDots:!!e.allowDots,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:g.charsetSentinel,delimiter:typeof e.delimiter>"u"?g.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:g.encode,encoder:typeof e.encoder=="function"?e.encoder:g.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:g.encodeValuesOnly,filter:f,format:n,formatter:o,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:g.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:g.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:g.strictNullHandling}};return U=function(s,e){var r=s,n=l(e),o,f;typeof n.filter=="function"?(f=n.filter,r=f("",r)):h(n.filter)&&(f=n.filter,o=f);var u=[];if(typeof r!="object"||r===null)return"";var c;e&&e.arrayFormat in t?c=e.arrayFormat:e&&"indices"in e?c=e.indices?"indices":"repeat":c="indices";var p=t[c];o||(o=Object.keys(r)),n.sort&&o.sort(n.sort);for(var w=0;w<o.length;++w){var d=o[w];n.skipNulls&&r[d]===null||S(u,m(r[d],d,p,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset))}var x=u.join(n.delimiter),O=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?O+="utf8=%26%2310003%3B&":O+="utf8=%E2%9C%93&"),x.length>0?O+x:""},U}var z,Y;function ie(){if(Y)return z;Y=1;var b=ee(),i=Object.prototype.hasOwnProperty,a=Array.isArray,t={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:b.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},h=function(m){return m.replace(/&#(\d+);/g,function(l,s){return String.fromCharCode(parseInt(s,10))})},y=function(m,l){return m&&typeof m=="string"&&l.comma&&m.indexOf(",")>-1?m.split(","):m},v="utf8=%26%2310003%3B",S="utf8=%E2%9C%93",F=function(l,s){var e={},r=s.ignoreQueryPrefix?l.replace(/^\?/,""):l,n=s.parameterLimit===1/0?void 0:s.parameterLimit,o=r.split(s.delimiter,n),f=-1,u,c=s.charset;if(s.charsetSentinel)for(u=0;u<o.length;++u)o[u].indexOf("utf8=")===0&&(o[u]===S?c="utf-8":o[u]===v&&(c="iso-8859-1"),f=u,u=o.length);for(u=0;u<o.length;++u)if(u!==f){var p=o[u],w=p.indexOf("]="),d=w===-1?p.indexOf("="):w+1,x,O;d===-1?(x=s.decoder(p,t.decoder,c,"key"),O=s.strictNullHandling?null:""):(x=s.decoder(p.slice(0,d),t.decoder,c,"key"),O=b.maybeMap(y(p.slice(d+1),s),function(A){return s.decoder(A,t.decoder,c,"value")})),O&&s.interpretNumericEntities&&c==="iso-8859-1"&&(O=h(O)),p.indexOf("[]=")>-1&&(O=a(O)?[O]:O),i.call(e,x)?e[x]=b.combine(e[x],O):e[x]=O}return e},$=function(m,l,s,e){for(var r=e?l:y(l,s),n=m.length-1;n>=0;--n){var o,f=m[n];if(f==="[]"&&s.parseArrays)o=[].concat(r);else{o=s.plainObjects?Object.create(null):{};var u=f.charAt(0)==="["&&f.charAt(f.length-1)==="]"?f.slice(1,-1):f,c=parseInt(u,10);!s.parseArrays&&u===""?o={0:r}:!isNaN(c)&&f!==u&&String(c)===u&&c>=0&&s.parseArrays&&c<=s.arrayLimit?(o=[],o[c]=r):u!=="__proto__"&&(o[u]=r)}r=o}return r},g=function(l,s,e,r){if(l){var n=e.allowDots?l.replace(/\.([^.[]+)/g,"[$1]"):l,o=/(\[[^[\]]*])/,f=/(\[[^[\]]*])/g,u=e.depth>0&&o.exec(n),c=u?n.slice(0,u.index):n,p=[];if(c){if(!e.plainObjects&&i.call(Object.prototype,c)&&!e.allowPrototypes)return;p.push(c)}for(var w=0;e.depth>0&&(u=f.exec(n))!==null&&w<e.depth;){if(w+=1,!e.plainObjects&&i.call(Object.prototype,u[1].slice(1,-1))&&!e.allowPrototypes)return;p.push(u[1])}return u&&p.push("["+n.slice(u.index)+"]"),$(p,s,e,r)}},E=function(l){if(!l)return t;if(l.decoder!==null&&l.decoder!==void 0&&typeof l.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof l.charset<"u"&&l.charset!=="utf-8"&&l.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var s=typeof l.charset>"u"?t.charset:l.charset;return{allowDots:typeof l.allowDots>"u"?t.allowDots:!!l.allowDots,allowPrototypes:typeof l.allowPrototypes=="boolean"?l.allowPrototypes:t.allowPrototypes,arrayLimit:typeof l.arrayLimit=="number"?l.arrayLimit:t.arrayLimit,charset:s,charsetSentinel:typeof l.charsetSentinel=="boolean"?l.charsetSentinel:t.charsetSentinel,comma:typeof l.comma=="boolean"?l.comma:t.comma,decoder:typeof l.decoder=="function"?l.decoder:t.decoder,delimiter:typeof l.delimiter=="string"||b.isRegExp(l.delimiter)?l.delimiter:t.delimiter,depth:typeof l.depth=="number"||l.depth===!1?+l.depth:t.depth,ignoreQueryPrefix:l.ignoreQueryPrefix===!0,interpretNumericEntities:typeof l.interpretNumericEntities=="boolean"?l.interpretNumericEntities:t.interpretNumericEntities,parameterLimit:typeof l.parameterLimit=="number"?l.parameterLimit:t.parameterLimit,parseArrays:l.parseArrays!==!1,plainObjects:typeof l.plainObjects=="boolean"?l.plainObjects:t.plainObjects,strictNullHandling:typeof l.strictNullHandling=="boolean"?l.strictNullHandling:t.strictNullHandling}};return z=function(m,l){var s=E(l);if(m===""||m===null||typeof m>"u")return s.plainObjects?Object.create(null):{};for(var e=typeof m=="string"?F(m,s):m,r=s.plainObjects?Object.create(null):{},n=Object.keys(e),o=0;o<n.length;++o){var f=n[o],u=g(f,e[f],s,typeof m=="string");r=b.merge(r,u,s)}return b.compact(r)},z}var B,J;function ae(){if(J)return B;J=1;var b=ne(),i=ie(),a=Z();return B={formats:a,parse:i,stringify:b},B}var re=ae();function P(){return P=Object.assign?Object.assign.bind():function(b){for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var t in a)({}).hasOwnProperty.call(a,t)&&(b[t]=a[t])}return b},P.apply(null,arguments)}class I{constructor(i,a,t){var h,y;this.name=i,this.definition=a,this.bindings=(h=a.bindings)!=null?h:{},this.wheres=(y=a.wheres)!=null?y:{},this.config=t}get template(){const i=`${this.origin}/${this.definition.uri}`.replace(/\/+$/,"");return i===""?"/":i}get origin(){return this.config.absolute?this.definition.domain?`${this.config.url.match(/^\w+:\/\//)[0]}${this.definition.domain}${this.config.port?`:${this.config.port}`:""}`:this.config.url:""}get parameterSegments(){var i,a;return(i=(a=this.template.match(/{[^}?]+\??}/g))==null?void 0:a.map(t=>({name:t.replace(/{|\??}/g,""),required:!/\?}$/.test(t)})))!=null?i:[]}matchesUrl(i){var a;if(!this.definition.methods.includes("GET"))return!1;const t=this.template.replace(/[.*+$()[\]]/g,"\\$&").replace(/(\/?){([^}?]*)(\??)}/g,(S,F,$,g)=>{var E;const m=`(?<${$}>${((E=this.wheres[$])==null?void 0:E.replace(/(^\^)|(\$$)/g,""))||"[^/?]+"})`;return g?`(${F}${m})?`:`${F}${m}`}).replace(/^\w+:\/\//,""),[h,y]=i.replace(/^\w+:\/\//,"").split("?"),v=(a=new RegExp(`^${t}/?$`).exec(h))!=null?a:new RegExp(`^${t}/?$`).exec(decodeURI(h));if(v){for(const S in v.groups)v.groups[S]=typeof v.groups[S]=="string"?decodeURIComponent(v.groups[S]):v.groups[S];return{params:v.groups,query:re.parse(y)}}return!1}compile(i){return this.parameterSegments.length?this.template.replace(/{([^}?]+)(\??)}/g,(a,t,h)=>{var y,v;if(!h&&[null,void 0].includes(i[t]))throw new Error(`Ziggy error: '${t}' parameter is required for route '${this.name}'.`);if(this.wheres[t]&&!new RegExp(`^${h?`(${this.wheres[t]})?`:this.wheres[t]}$`).test((v=i[t])!=null?v:""))throw new Error(`Ziggy error: '${t}' parameter '${i[t]}' does not match required format '${this.wheres[t]}' for route '${this.name}'.`);return encodeURI((y=i[t])!=null?y:"").replace(/%7C/g,"|").replace(/%25/g,"%").replace(/\$/g,"%24")}).replace(this.config.absolute?/(\.[^/]+?)(\/\/)/:/(^)(\/\/)/,"$1/").replace(/\/+$/,""):this.template}}class le extends String{constructor(i,a,t=!0,h){if(super(),this.t=h??(typeof Ziggy<"u"?Ziggy:globalThis==null?void 0:globalThis.Ziggy),this.t=P({},this.t,{absolute:t}),i){if(!this.t.routes[i])throw new Error(`Ziggy error: route '${i}' is not in the route list.`);this.i=new I(i,this.t.routes[i],this.t),this.o=this.u(a)}}toString(){const i=Object.keys(this.o).filter(a=>!this.i.parameterSegments.some(({name:t})=>t===a)).filter(a=>a!=="_query").reduce((a,t)=>P({},a,{[t]:this.o[t]}),{});return this.i.compile(this.o)+re.stringify(P({},i,this.o._query),{addQueryPrefix:!0,arrayFormat:"indices",encodeValuesOnly:!0,skipNulls:!0,encoder:(a,t)=>typeof a=="boolean"?Number(a):t(a)})}h(i){i?this.t.absolute&&i.startsWith("/")&&(i=this.l().host+i):i=this.m();let a={};const[t,h]=Object.entries(this.t.routes).find(([y,v])=>a=new I(y,v,this.t).matchesUrl(i))||[void 0,void 0];return P({name:t},a,{route:h})}m(){const{host:i,pathname:a,search:t}=this.l();return(this.t.absolute?i+a:a.replace(this.t.url.replace(/^\w*:\/\/[^/]+/,""),"").replace(/^\/+/,"/"))+t}current(i,a){const{name:t,params:h,query:y,route:v}=this.h();if(!i)return t;const S=new RegExp(`^${i.replace(/\./g,"\\.").replace(/\*/g,".*")}$`).test(t);if([null,void 0].includes(a)||!S)return S;const F=new I(t,v,this.t);a=this.u(a,F);const $=P({},h,y);if(Object.values(a).every(E=>!E)&&!Object.values($).some(E=>E!==void 0))return!0;const g=(E,m)=>Object.entries(E).every(([l,s])=>Array.isArray(s)&&Array.isArray(m[l])?s.every(e=>m[l].includes(e)):typeof s=="object"&&typeof m[l]=="object"&&s!==null&&m[l]!==null?g(s,m[l]):m[l]==s);return g(a,$)}l(){var i,a,t,h,y,v;const{host:S="",pathname:F="",search:$=""}=typeof window<"u"?window.location:{};return{host:(i=(a=this.t.location)==null?void 0:a.host)!=null?i:S,pathname:(t=(h=this.t.location)==null?void 0:h.pathname)!=null?t:F,search:(y=(v=this.t.location)==null?void 0:v.search)!=null?y:$}}get params(){const{params:i,query:a}=this.h();return P({},i,a)}get routeParams(){return this.h().params}get queryParams(){return this.h().query}has(i){return this.t.routes.hasOwnProperty(i)}u(i={},a=this.i){i!=null||(i={}),i=["string","number"].includes(typeof i)?[i]:i;const t=a.parameterSegments.filter(({name:h})=>!this.t.defaults[h]);return Array.isArray(i)?i=i.reduce((h,y,v)=>P({},h,t[v]?{[t[v].name]:y}:typeof y=="object"?y:{[y]:""}),{}):t.length!==1||i[t[0].name]||!i.hasOwnProperty(Object.values(a.bindings)[0])&&!i.hasOwnProperty("id")||(i={[t[0].name]:i}),P({},this.$(a),this.p(i,a))}$(i){return i.parameterSegments.filter(({name:a})=>this.t.defaults[a]).reduce((a,{name:t},h)=>P({},a,{[t]:this.t.defaults[t]}),{})}p(i,{bindings:a,parameterSegments:t}){return Object.entries(i).reduce((h,[y,v])=>{if(!v||typeof v!="object"||Array.isArray(v)||!t.some(({name:S})=>S===y))return P({},h,{[y]:v});if(!v.hasOwnProperty(a[y])){if(!v.hasOwnProperty("id"))throw new Error(`Ziggy error: object passed as '${y}' parameter is missing route model binding key '${a[y]}'.`);a[y]="id"}return P({},h,{[y]:v[a[y]]})},{})}valueOf(){return this.toString()}}function oe(b,i,a,t){const h=new le(b,i,a,t);return b?h.toString():h}export{oe as s};
