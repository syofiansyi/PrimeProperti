import{r as o,v as w,j as e,m as y}from"./app-D1CPe9kB.js";import{X as C}from"./index.es-CFeD3Mi_.js";import{A as k}from"./AppLayout-BZo5WS4j.js";import"./index-BctFJj0Y.js";import"./index-Dec3uIhJ.js";function _({ratings:c}){const[u,l]=o.useState(!1),[r,d]=o.useState(!1),[t,m]=o.useState(""),{data:s,setData:n,reset:x,post:p,put:h}=w({id:null,nama:"",ulasan:"",total_rate:1}),b=()=>l(!0),i=()=>{x(),d(!1),l(!1)},g=a=>{a.preventDefault(),r?h(`/ratings/${s.id}`,{onSuccess:i}):p("/ratings",{onSuccess:i})},f=a=>{n(a),d(!0),l(!0)},j=a=>{confirm("Yakin ingin menghapus rating ini?")&&y.delete(`/ratings/${a}`)},v=c.filter(a=>a.nama.toLowerCase().includes(t.toLowerCase())||a.ulasan.toLowerCase().includes(t.toLowerCase())||String(a.total_rate).includes(t)),N=[{name:"Nama",selector:a=>a.nama,sortable:!0},{name:"Ulasan",selector:a=>a.ulasan},{name:"Rating",selector:a=>a.total_rate},{name:"Aksi",cell:a=>e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:()=>f(a),className:"text-blue-600 hover:underline",children:"Edit"}),e.jsx("button",{onClick:()=>j(a.id),className:"text-red-600 hover:underline",children:"Hapus"})]})}];return e.jsx(k,{children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Daftar Rating"}),e.jsx("button",{onClick:b,className:"mb-4 bg-green-600 text-white px-4 py-2 rounded",children:"+ Rating"})]}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",placeholder:"Cari berdasarkan nama, ulasan, atau rating...",className:"w-full max-w-md border rounded px-4 py-2",value:t,onChange:a=>m(a.target.value)})}),e.jsx(C,{columns:N,data:v,pagination:!0,highlightOnHover:!0}),u&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white w-full max-w-md p-6 rounded shadow relative",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:r?"Edit Rating":"Tambah Rating"}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Nama"}),e.jsx("input",{type:"text",value:s.nama,onChange:a=>n("nama",a.target.value),className:"w-full border p-2 rounded",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Ulasan"}),e.jsx("textarea",{value:s.ulasan,onChange:a=>n("ulasan",a.target.value),className:"w-full border p-2 rounded",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Total Rate (1 - 5)"}),e.jsx("input",{type:"number",value:s.total_rate,min:1,max:5,onChange:a=>n("total_rate",parseInt(a.target.value)||1),className:"w-full border p-2 rounded",required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:i,className:"px-4 py-2 bg-gray-300 rounded",children:"Batal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",children:r?"Update":"Simpan"})]})]})]})})]})})}export{_ as default};
