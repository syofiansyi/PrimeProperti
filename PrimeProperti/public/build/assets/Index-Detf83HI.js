import{r,v as D,j as s,m as h}from"./app-CSlfTKLv.js";import{X as I}from"./index.es-Dr_fJs-0.js";import{A as L}from"./AppLayout-DX8QSxwY.js";import"./index-BctFJj0Y.js";import"./index-BxsmOkia.js";function q({sosmeds:f}){const[g,i]=r.useState(!1),[n,m]=r.useState(!1),[l,j]=r.useState(""),[u,p]=r.useState([]),{data:t,setData:o,reset:b}=D({id:null,username:"",medsos:"",kategori:"footer",icon:[]}),v=()=>i(!0),x=()=>{b(),m(!1),i(!1),p([])},N=e=>{e.preventDefault();const a=new FormData;a.append("username",t.username),a.append("medsos",t.medsos),a.append("kategori",t.kategori),t.icon.forEach((d,S)=>{a.append(`icon[${S}]`,d)});const c=n?`/sosmeds/${t.id}`:"/sosmeds";n&&a.append("_method","PUT"),h.post(c,a,{forceFormData:!0,onSuccess:()=>{x()}})},w=e=>{o({id:e.id,username:e.username,medsos:e.medsos,kategori:e.kategori,icon:[]}),p(e.icon??[]),m(!0),i(!0)},y=e=>{confirm("Yakin ingin menghapus icons ini?")&&h.delete(`/sosmeds/${e}`)},k=f.filter(e=>e.username.toLowerCase().includes(l.toLowerCase())||e.medsos.toLowerCase().includes(l.toLowerCase())),C=[{name:"Name",selector:e=>e.username,sortable:!0},{name:"Link",selector:e=>e.medsos},{name:"Icon",cell:e=>{var a;return s.jsx("div",{className:"flex gap-2",children:(a=e.icon)==null?void 0:a.map((c,d)=>s.jsx("img",{src:`/storage/${c}`,className:"w-8 h-8 object-cover rounded",alt:"icon"},d))})}},{name:"Aksi",cell:e=>s.jsxs("div",{className:"space-x-2",children:[s.jsx("button",{onClick:()=>w(e),className:"text-blue-600 hover:underline",children:"Edit"}),s.jsx("button",{onClick:()=>y(e.id),className:"text-red-600 hover:underline",children:"Hapus"})]})}];return s.jsx(L,{children:s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Daftar Icons"}),s.jsx("button",{onClick:v,className:"bg-green-600 text-white px-4 py-2 rounded",children:"+ Icons"})]}),s.jsx("input",{type:"text",placeholder:"Cari name/ icons...",className:"w-full max-w-md border rounded px-4 py-2 mb-4",value:l,onChange:e=>j(e.target.value)}),s.jsx(I,{columns:C,data:k,pagination:!0,highlightOnHover:!0,keyField:"id"}),g&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:s.jsxs("div",{className:"bg-white p-6 w-full max-w-md rounded shadow relative",children:[s.jsx("h2",{className:"text-lg font-bold mb-4",children:n?"Edit Sosmed":"Tambah Sosmed"}),s.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block font-medium",children:"Nama"}),s.jsx("input",{type:"text",value:t.username,onChange:e=>o("username",e.target.value),className:"w-full border p-2 rounded",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block font-medium",children:"Link"}),s.jsx("input",{type:"text",value:t.medsos,onChange:e=>o("medsos",e.target.value),className:"w-full border p-2 rounded",required:!0})]}),s.jsx("div",{}),s.jsxs("div",{children:[s.jsx("label",{className:"block font-medium",children:"Icon"}),s.jsx("input",{type:"file",multiple:!0,onChange:e=>{e.target.files&&o("icon",Array.from(e.target.files))}}),n&&u.length>0&&s.jsx("div",{className:"flex gap-2 mt-2",children:u.map((e,a)=>s.jsx("img",{src:`/storage/${e}`,className:"w-10 h-10 object-cover rounded",alt:`preview-${a}`},a))})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{type:"button",onClick:x,className:"px-4 py-2 bg-gray-300 rounded",children:"Batal"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",children:n?"Update":"Simpan"})]})]})]})})]})})}export{q as default};
