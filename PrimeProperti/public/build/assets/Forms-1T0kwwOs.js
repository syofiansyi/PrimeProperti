import{r as b,v as y,j as e}from"./app-Bi8d25UE.js";import{R as g}from"./quill.snow-FG3OZ5hG.js";function k({blog:t}){const c=b.useRef(null),{data:i,setData:r,post:h,put:f,processing:l,errors:s}=y({title:(t==null?void 0:t.title)||"",description:(t==null?void 0:t.description)||"",content:(t==null?void 0:t.content)||""}),j={toolbar:{container:[[{header:[1,2,3,!1]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link","image"],["clean"]],handlers:{image:()=>{const n=document.createElement("input");n.setAttribute("type","file"),n.setAttribute("accept","image/*"),n.click(),n.onchange=async()=>{var m,u;const o=(m=n.files)==null?void 0:m[0];if(!o)return;const d=new FormData;d.append("file",o);try{const N=await(await fetch("/upload-image",{method:"POST",body:d})).json(),a=(u=c.current)==null?void 0:u.getEditor(),x=a==null?void 0:a.getSelection();x&&(a==null||a.insertEmbed(x.index,"image",N.location))}catch(p){console.error("Image upload failed",p)}}}}}},v=n=>{n.preventDefault(),t?f(`/blogs/${t.id}`):h("/blogs")};return e.jsxs("div",{className:"max-w-3xl mx-auto p-6",children:[e.jsxs("h1",{className:"text-2xl font-bold mb-4",children:[t?"Edit":"Create"," Blog"]}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Title"}),e.jsx("input",{type:"text",value:i.title,onChange:n=>r("title",n.target.value),className:"w-full border px-3 py-2 rounded"}),s.title&&e.jsx("div",{className:"text-red-500",children:s.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Description"}),e.jsx("textarea",{value:i.description,onChange:n=>r("description",n.target.value),className:"w-full border px-3 py-2 rounded"}),s.description&&e.jsx("div",{className:"text-red-500",children:s.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Content"}),e.jsx(g,{ref:c,value:i.content,onChange:n=>r("content",n),theme:"snow",modules:j,className:"bg-white"}),s.content&&e.jsx("div",{className:"text-red-500",children:s.content})]}),e.jsx("button",{type:"submit",disabled:l,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:l?"Saving...":t?"Update":"Create"})]})]})}export{k as default};
