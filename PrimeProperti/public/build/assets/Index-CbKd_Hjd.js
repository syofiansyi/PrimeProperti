import{r as n,v as C,j as a,m as f}from"./app-wnlPONtW.js";import{X as P}from"./index.es-QnggK9T-.js";import{A as w}from"./AppLayout-DmAt0Zg0.js";import"./index-BctFJj0Y.js";import"./index-C4SEtx4o.js";function H({products:c}){const[j,b]=n.useState(!1),[o,d]=n.useState(!1),[m,g]=n.useState(""),[y,N]=n.useState(c),v=["Apartment","Warehouse","Hotel","Boarding House","House","Shophouse","Land","Villa"],{data:s,setData:i}=C({id:null,title:"",location:"",maps:"",deskripsi:"",popular:!1,features:[""],badge:[""],properti_detail:[""],properti_pembayaran:[""],properti_fasilitas:[""],tipe:"",price:"",satuan:"",images:[]});n.useEffect(()=>{const e=m.toLowerCase(),t=c.filter(r=>r.title.toLowerCase().includes(e)||r.location.toLowerCase().includes(e)||String(r.price).includes(e));N(t)},[m,c]);const u=e=>{e?(d(!0),i({id:e.id,title:e.title,location:e.location,maps:e.maps,deskripsi:e.deskripsi,popular:e.popular==="1",features:Array.isArray(e.features)?e.features:[e.features],badge:Array.isArray(e.badge)?e.badge:[e.badge],properti_detail:Array.isArray(e.properti_detail)?e.properti_detail:[e.properti_detail],properti_pembayaran:Array.isArray(e.properti_pembayaran)?e.properti_pembayaran:[e.properti_pembayaran],properti_fasilitas:Array.isArray(e.properti_fasilitas)?e.properti_fasilitas:[e.properti_fasilitas],tipe:e.tipe,satuan:e.satuan,price:String(e.price),images:[]})):(d(!1),h()),b(!0)},x=()=>{b(!1),h()},h=()=>{i({id:null,title:"",location:"",maps:"",deskripsi:"",popular:!1,features:[""],badge:[""],properti_detail:[""],properti_pembayaran:[""],properti_fasilitas:[""],tipe:"",satuan:"",price:"",images:[]}),d(!1)},_=e=>{e.preventDefault();const t=new FormData;t.append("title",s.title),t.append("location",s.location),t.append("maps",s.maps),t.append("deskripsi",s.deskripsi),t.append("popular",s.popular?"1":"0"),t.append("price",s.price),t.append("tipe",s.tipe),t.append("satuan",s.satuan),s.features.forEach((l,p)=>{t.append(`features[${p}]`,l)}),s.badge.forEach((l,p)=>{t.append(`badge[${p}]`,l)}),s.images.forEach((l,p)=>{t.append(`images[${p}]`,l)}),s.properti_detail.forEach((l,p)=>{t.append(`properti_detail[${p}]`,l)}),s.properti_pembayaran.forEach((l,p)=>{t.append(`properti_pembayaran[${p}]`,l)}),s.properti_fasilitas.forEach((l,p)=>{t.append(`properti_fasilitas[${p}]`,l)});const r=o?`/products/${s.id}`:"/products";o&&t.append("_method","PUT"),f.post(r,t,{onSuccess:()=>{x()}})},k=e=>{confirm("Are you sure you want to delete this product?")&&f.delete(`/products/${e}`)},A=[{name:"Nomor",cell:(e,t)=>a.jsx("span",{children:t+1}),width:"8%"},{name:"Title",selector:e=>e.title,sortable:!0},{name:"Location",selector:e=>e.location,sortable:!0},{name:"Deskripsi",selector:e=>e.deskripsi,sortable:!0},{name:"Features",cell:e=>a.jsx("ul",{className:"list-disc pl-4",children:(Array.isArray(e.features)?e.features:[e.features]).map((t,r)=>a.jsx("li",{children:t},r))})},{name:"Badge",cell:e=>a.jsx("ul",{className:"list-disc pl-4",children:(Array.isArray(e.badge)?e.badge:[e.badge]).map((t,r)=>a.jsx("li",{children:t},r))})},{name:"Properti Detail",cell:e=>a.jsx("ul",{className:"list-disc pl-4",children:(Array.isArray(e.properti_detail)?e.properti_detail:[e.properti_detail]).map((t,r)=>a.jsx("li",{children:t},r))})},{name:"Properti Pembayaran",cell:e=>a.jsx("ul",{className:"list-disc pl-4",children:(Array.isArray(e.properti_pembayaran)?e.properti_pembayaran:[e.properti_pembayaran]).map((t,r)=>a.jsx("li",{children:t},r))})},{name:"Properti Fasilitas",cell:e=>a.jsx("ul",{className:"list-disc pl-4",children:(Array.isArray(e.properti_fasilitas)?e.properti_fasilitas:[e.properti_fasilitas]).map((t,r)=>a.jsx("li",{children:t},r))})},{name:"Tipe",selector:e=>e.tipe,sortable:!0},{name:"Price",selector:e=>e.price,sortable:!0},{name:"Images",cell:e=>a.jsx("div",{className:"flex gap-1 flex-wrap",children:Array.isArray(e.image)?e.image.map((t,r)=>a.jsx("img",{src:`/storage/${t}`,alt:`img-${r}`,className:"w-10 h-10 object-cover rounded"},r)):e.image?a.jsx("img",{src:`/storage/${e.image}`,alt:"img",className:"w-10 h-10 object-cover rounded"}):"-"})},{name:"Actions",cell:e=>a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>u(e),className:"text-blue-600 hover:underline",children:"Edit"}),a.jsx("button",{onClick:()=>e.id!==null&&k(e.id),className:"text-red-600 hover:underline",children:"Delete"})]})}];return a.jsx(a.Fragment,{children:a.jsx(w,{children:a.jsx("div",{className:"",children:a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Product"}),a.jsx("button",{onClick:()=>u(),className:"mb-4 bg-green-600 text-white px-4 py-2 rounded",children:"+ Product"})]}),j&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white w-full max-w-lg max-h-[80vh] overflow-y-auto rounded shadow p-6",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:o?"Edit Product":"Add Product"}),a.jsxs("form",{onSubmit:_,className:"space-y-4",children:[a.jsx("div",{children:a.jsx("label",{className:"font-semibold block mb-2",children:"Title"})}),a.jsx("input",{type:"text",placeholder:"Title",value:s.title,onChange:e=>i("title",e.target.value),className:"w-full border px-4 py-2"}),a.jsx("div",{children:a.jsx("label",{className:"font-semibold block mb-2",children:"Lokasi"})}),a.jsx("input",{type:"text",placeholder:"Location",value:s.location,onChange:e=>i("location",e.target.value),className:"w-full border px-4 py-2"}),a.jsx("div",{children:a.jsx("label",{className:"font-semibold block mb-2",children:"Maps"})}),a.jsx("input",{type:"text",placeholder:"Maps",value:s.maps,onChange:e=>i("maps",e.target.value),className:"w-full border px-4 py-2"}),a.jsx("div",{children:a.jsx("label",{className:"font-semibold block mb-2",children:"Deskripsi"})}),a.jsx("textarea",{placeholder:"Deskripsi",value:s.deskripsi,onChange:e=>i("deskripsi",e.target.value),className:"w-full border px-4 py-2"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"font-semibold block mb-2",children:"Features"}),s.features.map((e,t)=>a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("input",{type:"text",value:e,onChange:r=>{const l=[...s.features];l[t]=r.target.value,i("features",l)},className:"w-full border px-2 py-1",placeholder:`Feature ${t+1}`}),a.jsx("button",{type:"button",onClick:()=>i("features",s.features.filter((r,l)=>l!==t)),className:"text-red-500 text-sm px-2",title:"Hapus fitur",children:"ðŸ—‘"})]},t)),a.jsx("button",{type:"button",onClick:()=>i("features",[...s.features,""]),className:"text-blue-600 text-sm",children:"+ Add Feature"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"font-semibold block mb-2",children:"Badge"}),s.badge.map((e,t)=>a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("input",{type:"text",value:e,onChange:r=>{const l=[...s.badge];l[t]=r.target.value,i("badge",l)},className:"w-full border px-2 py-1",placeholder:`Badge ${t+1}`}),a.jsx("button",{type:"button",onClick:()=>i("badge",s.badge.filter((r,l)=>l!==t)),className:"text-red-500 text-sm px-2",title:"Hapus badge",children:"ðŸ—‘"})]},t)),a.jsx("button",{type:"button",onClick:()=>i("badge",[...s.badge,""]),className:"text-blue-600 text-sm",children:"+ Add Badge"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"font-semibold block mb-2",children:"Detail Properti"}),s.properti_detail.map((e,t)=>a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("input",{type:"text",value:e,onChange:r=>{const l=[...s.properti_detail];l[t]=r.target.value,i("properti_detail",l)},className:"w-full border px-2 py-1",placeholder:`Properti Detail ${t+1}`}),a.jsx("button",{type:"button",onClick:()=>i("properti_detail",s.properti_detail.filter((r,l)=>l!==t)),className:"text-red-500 text-sm px-2",title:"Hapus properti detail",children:"ðŸ—‘"})]},t)),a.jsx("button",{type:"button",onClick:()=>i("properti_detail",[...s.properti_detail,""]),className:"text-blue-600 text-sm",children:"+ Add Properti Detail"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"font-semibold block mb-2",children:"Pembayaran"}),s.properti_pembayaran.map((e,t)=>a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("input",{type:"text",value:e,onChange:r=>{const l=[...s.properti_pembayaran];l[t]=r.target.value,i("properti_pembayaran",l)},className:"w-full border px-2 py-1",placeholder:`Properti Pembayaran ${t+1}`}),a.jsx("button",{type:"button",onClick:()=>i("properti_pembayaran",s.properti_pembayaran.filter((r,l)=>l!==t)),className:"text-red-500 text-sm px-2",title:"Hapus properti pembayaran",children:"ðŸ—‘"})]},t)),a.jsx("button",{type:"button",onClick:()=>i("properti_pembayaran",[...s.properti_pembayaran,""]),className:"text-blue-600 text-sm",children:"+ Add Properti Pembayaran"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"font-semibold block mb-2",children:"Fasilitas"}),s.properti_fasilitas.map((e,t)=>a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("input",{type:"text",value:e,onChange:r=>{const l=[...s.properti_fasilitas];l[t]=r.target.value,i("properti_fasilitas",l)},className:"w-full border px-2 py-1",placeholder:`Properti Fasilitas ${t+1}`}),a.jsx("button",{type:"button",onClick:()=>i("properti_fasilitas",s.properti_fasilitas.filter((r,l)=>l!==t)),className:"text-red-500 text-sm px-2",title:"Hapus properti fasilitas",children:"ðŸ—‘"})]},t)),a.jsx("button",{type:"button",onClick:()=>i("properti_fasilitas",[...s.properti_fasilitas,""]),className:"text-blue-600 text-sm",children:"+ Add Properti Fasilitas"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"font-semibold block mb-2",children:"Harga"}),a.jsx("input",{type:"number",value:s.price,onChange:e=>i("price",e.target.value),className:"w-full border px-4 py-2",placeholder:"Masukkan harga"})]}),a.jsx("div",{children:a.jsx("label",{className:"font-semibold block mb-2",children:"Satuan"})}),a.jsx("input",{type:"text",placeholder:"Satuan",value:s.satuan,onChange:e=>i("satuan",e.target.value),className:"w-full border px-4 py-2"}),a.jsx("div",{}),a.jsx("div",{children:a.jsx("label",{className:"font-semibold block mb-2",children:"Tipe Properti"})}),a.jsxs("select",{value:s.tipe,onChange:e=>i("tipe",e.target.value),className:"w-full border px-4 py-2",children:[a.jsx("option",{value:"",children:"Pilih Tipe"}),v.map((e,t)=>a.jsx("option",{value:e,children:e},t))]}),a.jsx("div",{children:a.jsx("label",{className:"font-semibold block mb-2",children:"Gambar"})}),a.jsx("input",{type:"file",multiple:!0,onChange:e=>{e.target.files&&i("images",Array.from(e.target.files))}}),a.jsx("div",{children:a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:s.popular,onChange:e=>i("popular",e.target.checked),className:"w-4 h-4"}),a.jsx("span",{className:"font-semibold block mb-2",children:"Popular"})]})}),a.jsxs("div",{className:"flex gap-2 justify-end mt-4",children:[a.jsx("button",{type:"button",onClick:x,className:"text-gray-600 px-4 py-2 border rounded",children:"Cancel"}),a.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded",children:o?"Update":"Create"})]})]})]})}),a.jsxs("div",{className:"mt-4 overflow-x-auto",children:[a.jsx("input",{type:"text",placeholder:"Search by title, location, or price...",className:"mb-4 border px-4 py-2 w-full max-w-md rounded",value:m,onChange:e=>g(e.target.value)}),a.jsx("div",{className:"",children:a.jsx(P,{columns:A,data:y,pagination:!0,highlightOnHover:!0,responsive:!0,dense:!0})})]})]})})})})}export{H as default};
