import{r as d,v as w,j as e,m as p}from"./app-DEyrQujI.js";import{X as S}from"./index.es-CDQ9-L1o.js";import{A as P}from"./AppLayout-AG1-_-n-.js";import"./index-BctFJj0Y.js";import"./index-DLJCU07L.js";function F({contents:m}){const[g,r]=d.useState(!1),[l,u]=d.useState(!1),[c,j]=d.useState(""),{data:o,setData:s,reset:b}=w({id:null,kategori:"",content:[]}),f=()=>r(!0),h=()=>{b(),u(!1),r(!1)},x=t=>{t.preventDefault();const n=new FormData;o.content.forEach(i=>n.append("content[]",i)),n.append("kategori",o.kategori);const a=l?`/content/${o.id}`:"/content";l&&n.append("_method","PUT"),p.post(a,n,{forceFormData:!0,onSuccess:()=>h()})},v=t=>{s({id:t.id,kategori:t.kategori,content:t.content}),u(!0),r(!0)},k=t=>{confirm("Yakin ingin menghapus data ini?")&&p.delete(`/content/${t}`)},N=m.filter(t=>t.kategori.toLowerCase().includes(c.toLowerCase())||t.content.some(n=>n.toLowerCase().includes(c.toLowerCase()))),y=[{name:"Kategori",selector:t=>t.kategori,sortable:!0},{name:"Content",cell:t=>e.jsx("ul",{className:"list-disc ml-4",children:t.content.map((n,a)=>e.jsx("li",{children:e.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:n})},a))})},{name:"Aksi",cell:t=>e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:()=>v(t),className:"text-blue-600 hover:underline",children:"Edit"}),e.jsx("button",{onClick:()=>k(t.id),className:"text-red-600 hover:underline",children:"Hapus"})]})}];return e.jsx(P,{children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Daftar Content"}),e.jsx("button",{onClick:f,className:"bg-green-600 text-white px-4 py-2 rounded",children:"+ Tambah"})]}),e.jsx("input",{type:"text",placeholder:"Cari kategori / link...",className:"w-full max-w-md border rounded px-4 py-2 mb-4",value:c,onChange:t=>j(t.target.value)}),e.jsx(S,{columns:y,data:N,pagination:!0,highlightOnHover:!0,keyField:"id"}),g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded shadow relative",style:{width:"500px",maxHeight:"400px",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"p-6 flex-1 overflow-y-auto",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:l?"Edit Content":"Tambah Content"}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Kategori"}),e.jsxs("select",{value:o.kategori,onChange:t=>s("kategori",t.target.value),className:"w-full border p-2 rounded",required:!0,children:[e.jsx("option",{value:"",children:"-- Pilih kategori --"}),e.jsx("option",{value:"Contact",children:"Contact"}),e.jsx("option",{value:"Header",children:"Header"}),e.jsx("option",{value:"HighlightSection",children:"HighlightSection"}),e.jsx("option",{value:"ProductHiglight",children:"ProductHiglight"}),e.jsx("option",{value:"ArticlesSection",children:"ArticlesSection"}),e.jsx("option",{value:"RatingsSection",children:"RatingsSection"}),e.jsx("option",{value:"ProductGallery",children:"ProductGallery"}),e.jsx("option",{value:"ProductInfo",children:"ProductInfo"}),e.jsx("option",{value:"ProductTabs",children:"ProductTabs"}),e.jsx("option",{value:"ProductTabs",children:"ProductTabs"}),e.jsx("option",{value:"About",children:"About"}),e.jsx("option",{value:"HighlighProduct",children:"HighlighProduct"}),e.jsx("option",{value:"ProductSection",children:"ProductSection"}),e.jsx("option",{value:"Footer",children:"Footer"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Content (link)"}),e.jsxs("div",{className:"space-y-2",children:[o.content.map((t,n)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:t,onChange:a=>{const i=[...o.content];i[n]=a.target.value,s("content",i)},className:"w-full border p-2 rounded",required:!0}),e.jsx("button",{type:"button",onClick:()=>{const a=o.content.filter((i,C)=>C!==n);s("content",a)},className:"bg-red-500 text-white px-2 rounded",children:"Hapus"})]},n)),e.jsx("button",{type:"button",onClick:()=>s("content",[...o.content,""]),className:"bg-green-600 text-white px-2 py-1 rounded",children:"+ Tambah Baris"})]})]})]})]}),e.jsxs("div",{className:"p-4 border-t flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:h,className:"px-4 py-2 bg-gray-300 rounded",children:"Batal"}),e.jsx("button",{type:"submit",onClick:x,className:"px-4 py-2 bg-blue-600 text-white rounded",children:l?"Update":"Simpan"})]})]})})]})})}export{F as default};
