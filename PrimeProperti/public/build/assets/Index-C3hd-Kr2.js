import{r as n,v as C,j as a,m as f}from"./app-C2XQYNXt.js";import{X as k}from"./index.es-CVmODbaC.js";import{A as w}from"./AppLayout-CZOv93El.js";import"./index-BctFJj0Y.js";import"./index-BhE9w9z8.js";function T({products:d}){const[j,u]=n.useState(!1),[o,c]=n.useState(!1),[m,y]=n.useState(""),[g,v]=n.useState(d),_=["Apartment","Warehouse","Hotel","Boarding House","House","Shophouse","Land","Villa"],{data:r,setData:i}=C({id:null,title:"",location:"",maps:"",deskripsi:"",popular:!1,features:[""],badge:[""],properti_detail:[""],properti_pembayaran:[""],properti_fasilitas:[""],tipe:"",price:"",images:[]});n.useEffect(()=>{const e=m.toLowerCase(),t=d.filter(l=>l.title.toLowerCase().includes(e)||l.location.toLowerCase().includes(e)||String(l.price).includes(e));v(t)},[m,d]);const x=e=>{e?(c(!0),i({id:e.id,title:e.title,location:e.location,maps:e.maps,deskripsi:e.deskripsi,popular:e.popular==="1",features:Array.isArray(e.features)?e.features:[e.features],badge:Array.isArray(e.badge)?e.badge:[e.badge],properti_detail:Array.isArray(e.properti_detail)?e.properti_detail:[e.properti_detail],properti_pembayaran:Array.isArray(e.properti_pembayaran)?e.properti_pembayaran:[e.properti_pembayaran],properti_fasilitas:Array.isArray(e.properti_fasilitas)?e.properti_fasilitas:[e.properti_fasilitas],tipe:e.tipe,price:String(e.price),images:[]})):(c(!1),b()),u(!0)},h=()=>{u(!1),b()},b=()=>{i({id:null,title:"",location:"",maps:"",deskripsi:"",popular:!1,features:[""],badge:[""],properti_detail:[""],properti_pembayaran:[""],properti_fasilitas:[""],tipe:"",price:"",images:[]}),c(!1)},N=e=>{e.preventDefault();const t=new FormData;t.append("title",r.title),t.append("location",r.location),t.append("maps",r.maps),t.append("deskripsi",r.deskripsi),t.append("popular",r.popular?"1":"0"),t.append("price",r.price),t.append("tipe",r.tipe),r.features.forEach((s,p)=>{t.append(`features[${p}]`,s)}),r.badge.forEach((s,p)=>{t.append(`badge[${p}]`,s)}),r.images.forEach((s,p)=>{t.append(`images[${p}]`,s)}),r.properti_detail.forEach((s,p)=>{t.append(`properti_detail[${p}]`,s)}),r.properti_pembayaran.forEach((s,p)=>{t.append(`properti_pembayaran[${p}]`,s)}),r.properti_fasilitas.forEach((s,p)=>{t.append(`properti_fasilitas[${p}]`,s)});const l=o?`/products/${r.id}`:"/products";o&&t.append("_method","PUT"),f.post(l,t,{onSuccess:()=>{h()}})},A=e=>{confirm("Are you sure you want to delete this product?")&&f.delete(`/products/${e}`)},P=[{name:"Nomor",cell:(e,t)=>a.jsx("span",{children:t+1}),width:"8%"},{name:"Title",selector:e=>e.title,sortable:!0},{name:"Location",selector:e=>e.location,sortable:!0},{name:"Deskripsi",selector:e=>e.deskripsi,sortable:!0},{name:"Features",cell:e=>a.jsx("ul",{className:"list-disc pl-4",children:(Array.isArray(e.features)?e.features:[e.features]).map((t,l)=>a.jsx("li",{children:t},l))})},{name:"Badge",cell:e=>a.jsx("ul",{className:"list-disc pl-4",children:(Array.isArray(e.badge)?e.badge:[e.badge]).map((t,l)=>a.jsx("li",{children:t},l))})},{name:"Properti Detail",cell:e=>a.jsx("ul",{className:"list-disc pl-4",children:(Array.isArray(e.properti_detail)?e.properti_detail:[e.properti_detail]).map((t,l)=>a.jsx("li",{children:t},l))})},{name:"Properti Pembayaran",cell:e=>a.jsx("ul",{className:"list-disc pl-4",children:(Array.isArray(e.properti_pembayaran)?e.properti_pembayaran:[e.properti_pembayaran]).map((t,l)=>a.jsx("li",{children:t},l))})},{name:"Properti Fasilitas",cell:e=>a.jsx("ul",{className:"list-disc pl-4",children:(Array.isArray(e.properti_fasilitas)?e.properti_fasilitas:[e.properti_fasilitas]).map((t,l)=>a.jsx("li",{children:t},l))})},{name:"Tipe",selector:e=>e.tipe,sortable:!0},{name:"Price",selector:e=>e.price,sortable:!0},{name:"Images",cell:e=>a.jsx("div",{className:"flex gap-1 flex-wrap",children:Array.isArray(e.image)?e.image.map((t,l)=>a.jsx("img",{src:`/storage/${t}`,alt:`img-${l}`,className:"w-10 h-10 object-cover rounded"},l)):e.image?a.jsx("img",{src:`/storage/${e.image}`,alt:"img",className:"w-10 h-10 object-cover rounded"}):"-"})},{name:"Actions",cell:e=>a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>x(e),className:"text-blue-600 hover:underline",children:"Edit"}),a.jsx("button",{onClick:()=>e.id!==null&&A(e.id),className:"text-red-600 hover:underline",children:"Delete"})]})}];return a.jsx(a.Fragment,{children:a.jsx(w,{children:a.jsx("div",{className:"",children:a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Product"}),a.jsx("button",{onClick:()=>x(),className:"mb-4 bg-green-600 text-white px-4 py-2 rounded",children:"+ Product"})]}),j&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white w-full max-w-lg max-h-[80vh] overflow-y-auto rounded shadow p-6",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:o?"Edit Product":"Add Product"}),a.jsxs("form",{onSubmit:N,className:"space-y-4",children:[a.jsx("div",{children:a.jsx("label",{children:"Titile"})}),a.jsx("input",{type:"text",placeholder:"Title",value:r.title,onChange:e=>i("title",e.target.value),className:"w-full border px-4 py-2"}),a.jsx("div",{children:a.jsx("label",{children:"Tipe Location"})}),a.jsx("input",{type:"text",placeholder:"Location",value:r.location,onChange:e=>i("location",e.target.value),className:"w-full border px-4 py-2"}),a.jsx("div",{children:a.jsx("label",{children:"Maps"})}),a.jsx("input",{type:"text",placeholder:"Maps",value:r.maps,onChange:e=>i("maps",e.target.value),className:"w-full border px-4 py-2"}),a.jsx("div",{children:a.jsx("label",{children:"Deskripsi"})}),a.jsx("textarea",{placeholder:"Deskripsi",value:r.deskripsi,onChange:e=>i("deskripsi",e.target.value),className:"w-full border px-4 py-2"}),a.jsx("div",{children:a.jsx("label",{children:"Features"})}),r.features.map((e,t)=>a.jsx("input",{type:"text",value:e,onChange:l=>{const s=[...r.features];s[t]=l.target.value,i("features",s)},className:"w-full border px-2 py-1 mb-2",placeholder:`Features ${t+1}`},t)),a.jsx("button",{type:"button",onClick:()=>i("features",[...r.features,""]),className:"text-blue-600 text-sm",children:"+ Add Features"}),a.jsx("div",{children:a.jsx("label",{children:"Badge"})}),r.badge.map((e,t)=>a.jsx("input",{type:"text",value:e,onChange:l=>{const s=[...r.badge];s[t]=l.target.value,i("badge",s)},className:"w-full border px-2 py-1 mb-2",placeholder:`Badge ${t+1}`},t)),a.jsx("button",{type:"button",onClick:()=>i("badge",[...r.badge,""]),className:"text-blue-600 text-sm",children:"+ Add Badge"}),a.jsx("div",{children:a.jsx("label",{children:"Detail Properti"})}),r.properti_detail.map((e,t)=>a.jsx("input",{type:"text",value:e,onChange:l=>{const s=[...r.properti_detail];s[t]=l.target.value,i("properti_detail",s)},className:"w-full border px-2 py-1 mb-2",placeholder:`Properti Detail ${t+1}`},t)),a.jsx("button",{type:"button",onClick:()=>i("properti_detail",[...r.properti_detail,""]),className:"text-blue-600 text-sm",children:"+ Add Properti Detail"}),a.jsx("div",{children:a.jsx("label",{children:"Pembayaran"})}),r.properti_pembayaran.map((e,t)=>a.jsx("input",{type:"text",value:e,onChange:l=>{const s=[...r.properti_pembayaran];s[t]=l.target.value,i("properti_pembayaran",s)},className:"w-full border px-2 py-1 mb-2",placeholder:`Properti Pembayaran ${t+1}`},t)),a.jsx("button",{type:"button",onClick:()=>i("properti_pembayaran",[...r.properti_pembayaran,""]),className:"text-blue-600 text-sm",children:"+ Add Properti Pembayaran"}),a.jsx("div",{children:a.jsx("label",{children:"Fasilitas"})}),r.properti_fasilitas.map((e,t)=>a.jsx("input",{type:"text",value:e,onChange:l=>{const s=[...r.properti_fasilitas];s[t]=l.target.value,i("properti_fasilitas",s)},className:"w-full border px-2 py-1 mb-2",placeholder:`Properti Fasilitas ${t+1}`},t)),a.jsx("button",{type:"button",onClick:()=>i("properti_fasilitas",[...r.properti_fasilitas,""]),className:"text-blue-600 text-sm",children:"+ Add Properti Fasilitas"}),a.jsx("div",{children:a.jsx("label",{children:"Harga"})}),a.jsx("input",{type:"number",placeholder:"Price",value:r.price,onChange:e=>i("price",e.target.value),className:"w-full border px-4 py-2"}),a.jsx("div",{children:a.jsx("label",{children:"Tipe Properti"})}),a.jsxs("select",{value:r.tipe,onChange:e=>i("tipe",e.target.value),className:"w-full border px-4 py-2",children:[a.jsx("option",{value:"",children:"Pilih Tipe"}),_.map((e,t)=>a.jsx("option",{value:e,children:e},t))]}),a.jsx("div",{children:a.jsx("label",{children:"Gambar"})}),a.jsx("input",{type:"file",multiple:!0,onChange:e=>{e.target.files&&i("images",Array.from(e.target.files))}}),a.jsx("div",{children:a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:r.popular,onChange:e=>i("popular",e.target.checked),className:"w-4 h-4"}),a.jsx("span",{children:"Popular"})]})}),a.jsxs("div",{className:"flex gap-2 justify-end mt-4",children:[a.jsx("button",{type:"button",onClick:h,className:"text-gray-600 px-4 py-2 border rounded",children:"Cancel"}),a.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded",children:o?"Update":"Create"})]})]})]})}),a.jsxs("div",{className:"mt-4 overflow-x-auto",children:[a.jsx("input",{type:"text",placeholder:"Search by title, location, or price...",className:"mb-4 border px-4 py-2 w-full max-w-md rounded",value:m,onChange:e=>y(e.target.value)}),a.jsx("div",{className:"",children:a.jsx(k,{columns:P,data:g,pagination:!0,highlightOnHover:!0,responsive:!0,dense:!0})})]})]})})})})}export{T as default};
