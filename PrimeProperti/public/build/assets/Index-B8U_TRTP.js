import{r as i,v as C,j as e,m as x}from"./app-Do4ZotAy.js";import{X as H}from"./index.es-DJqFBMzv.js";import{A as I}from"./AppLayout-CjIzqiUP.js";import"./index-BctFJj0Y.js";import"./index-_Wohz3EO.js";function $({sosmeds:g}){const[j,l]=i.useState(!1),[o,u]=i.useState(!1),[r,v]=i.useState(""),[m,h]=i.useState([]),{data:a,setData:n,reset:f}=C({id:null,username:"",medsos:"",kategori:"",icon:[]}),b=()=>l(!0),p=()=>{f(),u(!1),l(!1),h([])},N=t=>{t.preventDefault();const s=new FormData;s.append("username",a.username),s.append("medsos",a.medsos),s.append("kategori",a.kategori),a.icon.forEach((d,P)=>{s.append(`icon[${P}]`,d)});const c=o?`/sosmeds/${a.id}`:"/sosmeds";o&&s.append("_method","PUT"),x.post(c,s,{forceFormData:!0,onSuccess:()=>{p()}})},k=t=>{n({id:t.id,username:t.username,medsos:t.medsos,kategori:t.kategori,icon:[]}),h(t.icon??[]),u(!0),l(!0)},w=t=>{confirm("Yakin ingin menghapus icons ini?")&&x.delete(`/sosmeds/${t}`)},y=g.filter(t=>t.username.toLowerCase().includes(r.toLowerCase())||t.medsos.toLowerCase().includes(r.toLowerCase())),S=[{name:"Name",selector:t=>t.username,sortable:!0},{name:"Link",selector:t=>t.medsos},{name:"Icon",cell:t=>{var s;return e.jsx("div",{className:"flex gap-2",children:(s=t.icon)==null?void 0:s.map((c,d)=>e.jsx("img",{src:`/storage/${c}`,className:"w-8 h-8 object-cover rounded",alt:"icon"},d))})}},{name:"Kategori",selector:t=>t.kategori},{name:"Aksi",cell:t=>e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:()=>k(t),className:"text-blue-600 hover:underline",children:"Edit"}),e.jsx("button",{onClick:()=>w(t.id),className:"text-red-600 hover:underline",children:"Hapus"})]})}];return e.jsx(I,{children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Daftar Icons"}),e.jsx("button",{onClick:b,className:"bg-green-600 text-white px-4 py-2 rounded",children:"+ Icons"})]}),e.jsx("input",{type:"text",placeholder:"Cari name/ icons...",className:"w-full max-w-md border rounded px-4 py-2 mb-4",value:r,onChange:t=>v(t.target.value)}),e.jsx(H,{columns:S,data:y,pagination:!0,highlightOnHover:!0,keyField:"id"}),j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white p-6 w-full max-w-md rounded shadow relative",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:o?"Edit Sosmed":"Tambah Sosmed"}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Nama"}),e.jsx("input",{type:"text",value:a.username,onChange:t=>n("username",t.target.value),className:"w-full border p-2 rounded",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Link"}),e.jsx("input",{type:"text",value:a.medsos,onChange:t=>n("medsos",t.target.value),className:"w-full border p-2 rounded",required:!0})]}),e.jsx("div",{}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Icon"}),e.jsx("input",{type:"file",multiple:!0,onChange:t=>{t.target.files&&n("icon",Array.from(t.target.files))}}),o&&m.length>0&&e.jsx("div",{className:"flex gap-2 mt-2",children:m.map((t,s)=>e.jsx("img",{src:`/storage/${t}`,className:"w-10 h-10 object-cover rounded",alt:`preview-${s}`},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Kategori"}),e.jsxs("select",{value:a.kategori,onChange:t=>n("kategori",t.target.value),className:"w-full border p-2 rounded",required:!0,children:[e.jsx("option",{value:"",children:"-- Pilih kategori --"}),e.jsx("option",{value:"Contact",children:"Contact"}),e.jsx("option",{value:"Header",children:"Header"}),e.jsx("option",{value:"HighlightSection",children:"HighlightSection"}),e.jsx("option",{value:"ProductHiglight",children:"ProductHiglight"}),e.jsx("option",{value:"ArticlesSection",children:"ArticlesSection"}),e.jsx("option",{value:"RatingsSection",children:"RatingsSection"}),e.jsx("option",{value:"ProductGallery",children:"ProductGallery"}),e.jsx("option",{value:"ProductInfo",children:"ProductInfo"}),e.jsx("option",{value:"ProductTabs",children:"ProductTabs"}),e.jsx("option",{value:"ProductTabs",children:"ProductTabs"}),e.jsx("option",{value:"About",children:"About"}),e.jsx("option",{value:"HighlighProduct",children:"HighlighProduct"}),e.jsx("option",{value:"ProductSection",children:"ProductSection"}),e.jsx("option",{value:"Footer",children:"Footer"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 bg-gray-300 rounded",children:"Batal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",children:o?"Update":"Simpan"})]})]})]})})]})})}export{$ as default};
